define(function (require) {
    var wave = require('wavesurfer');
    var Microphone = require('wavesurferMicrophone');

    var wavesurfer = wave.create({ container: '#waveform', waveColor: 'violet' });
    var microphone = Object.create(wave.Microphone);
    var btn = document.getElementById("micBtn");

    btn.onclick = function(e){
        microphone.start();
    };

    microphone.init({
        wavesurfer: wavesurfer
    });

    microphone.on('deviceReady', function(stream) {
        console.log('Device ready!', stream);
    });
    microphone.on('deviceError', function(code) {
        console.warn('Device error: ' + code);
    });
});
